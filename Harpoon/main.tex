\documentclass[letterpaper,twocolumn,openany,nodeprecatedcode]{dndbook}

% Use babel or polyglossia to automatically redefine macros for terms
% Armor Class, Level, etc...
% Default output is in English; captions are located in lib/dndstring-captions.sty.
% If no captions exist for a language, English will be used.
%1. To load a language with babel:
%	\usepackage[<lang>]{babel}
%2. To load a language with polyglossia:
%	\usepackage{polyglossia}
%	\setdefaultlanguage{<lang>}
\usepackage[english]{babel}
%\usepackage[italian]{babel}
% For further options (multilanguage documents, hypenations, language environments...)
% please refer to babel/polyglossia's documentation.

\usepackage[utf8]{inputenc}
\usepackage[singlelinecheck=false]{caption}
\usepackage{lipsum}
\usepackage{listings}
\usepackage{shortvrb}
\usepackage{stfloats}

\captionsetup[table]{labelformat=empty,font={sf,sc,bf,},skip=0pt}

\MakeShortVerb{|}

\lstset{%
  basicstyle=\ttfamily,
  language=[LaTeX]{TeX},
  breaklines=true,
}

\title{DnD Homebrew}
\author{Felix Springer}
\date{2022/09/05}

\begin{document}

\frontmatter

\maketitle

\tableofcontents

\mainmatter%

\chapter{Piratenabenteuer}

\section{Weapons}

\subsection{Harpoon}
The harpoon is a weapon used for hunting whales.
It is basically a spear attached to a rope.

Watch out if you can hear someone shout ``There she blows!''.

\begin{DndTable}{XX}
    \textbf{Property}  & \textbf{Value} \\
    Cost & 10 gp \\
    Damage & 1d6 Piercing \\
    Weight & 6 lbs \\
    Thrown & 20/30 \\
    Versatile & 2d4 \\
    Tether & 30 \\
    Stuck & 1d4 Slashing / 1d8 Slashing \\
    Properties & Special, Stuck, Tether, Thrown, Versatile
\end{DndTable}

\subparagraph{Special (Harpoon)}
When the harpoon is dropped on the battlefield, because of a missed throw or after removal, you can use a bonus action to pull it back.

\subsection{Speargun}
A device, to shoot a small harpoon.
It uses a spring mechanism to shoot a tethered projectile.

\begin{DndTable}{XX}
    \textbf{Property}  & \textbf{Value} \\
    Cost & 75 gp \\
    Damage & 1d4 Piercing \\
    Weight & 10 lbs \\
    Range & 40/60 \\
    Ammunition & 1 \\
    Tether & 60 \\
    Stuck & 1d4 Slashing / 1d8 Slashing \\
    Properties & Ammunition, Loading, Range, Special, Stuck, Tether, Two-Handed
\end{DndTable}

\subparagraph{Special (Speargun)}
When the projectile is dropped on the battlefield it is automatically pulled back by a spring mechanism inside the speargun and will be loaded for the next attack.

\subsection{Properties}

\subparagraph{Tether}
When an attacker hits a target, they become tethered to each other.
A tethered creature's movement is limited by the distance of the tether.

When trying to move out of the maximum distance of the tether, the moving creature tries to drag the one at the other end of the tether around.
The maximum distance is given explicitly in feet.

To pull, the moving creature must make a Strength (Athletics) check.

\begin{center}
    \mbox{\bf Pull check DC} = \mbox{10} + \mbox{pulled creature's Strength modifier}
\end{center}

On a successful check, the creature can move freely and drag the other creature around.
On a failed save, the creature's movement is still constrained by the maximum distance of the tether.

\subparagraph{Stuck}
A weapon or projectile gets stuck, when it hits a target.
Anyone in reach can use an action to remove the stuck item.

When removing a stuck item, you must make a Wisdom (Medicine) check (DC 10). 
The stuck property lists two damage values.
The left one will be dealt to the target on a successful check and the right one on a failed check.

\section{Ideas}

\subsection{Living Harpoon/Speargun}
The living harpoon/speargun inherits all the regular stats, but gets one more property.

\subparagraph{Special (Living Harpoon/Speargun)}
When you hit a target, you can use spells, that would require \emph{Touch}, as long as the tether is connected you.

\section{Monsters}

\begin{DndMonster}{Sperm Whale}
  % Sources:
  % https://www.aidedd.org/dnd/monstres.php?vo=sperm-whale
  % https://www.reddit.com/r/DnD/comments/n51zdv/is_it_just_me_or_is_the_sperm_whales_swallowing_a/
  \DndMonsterType{Gargantuan beast, unaligned}

  \DndMonsterBasics[
      armor-class = {13 natural armor},
      hit-points  = {\DndDice{14d20 + 42}},
      speed       = {0 ft., swim 60 ft.},
    ]

  \DndMonsterAbilityScores[
      str = 26,
      dex = 8,
      con = 17,
      int = 3,
      wis = 12,
      cha = 5,
    ]

  \DndMonsterDetails[
      %saving-throws = {Str +0, Dex +0, Con +0, Int +0, Wis +0, Cha +0},
      %skills = {Acrobatics +0, Animal Handling +0, Arcana +0, Athletics +0, Deception +0, History +0, Insight +0, Intimidation +0, Investigation +0, Medicine +0, Nature +0, Perception +0, Performance +0, Persuasion +0, Religion +0, Sleight of Hand +0, Stealth +0, Survival +0},
      %damage-vulnerabilities = {cold},
      %damage-resistances = {bludgeoning, piercing, and slashing from nonmagical attacks},
      %damage-immunities = {poison},
      %condition-immunities = {poisoned},
      senses = {Blindsight 120 ft., passive Perception 11},
      %languages = {},
      challenge = 8,
    ]

  % Traits
  \DndMonsterAction{Echolocation}
  The whale can't use its blindsight while deafened.
  \DndMonsterAction{Hold Breath}
  The whale can hold its breath for 30 minutes.
  \DndMonsterAction{Keen Hearing}
  The whale has advantage on Wisdom (Perception) checks that rely on hearing.

  \DndMonsterSection{Actions}
  \DndMonsterMelee[
    name=Bite,
    mod=+11,
    %reach=5,
    %targets=one target,
    dmg=\DndDice{3d8+8},
    dmg-type=piercing,
    %plus-dmg=\DndDice{2d6},
    %plus-dmg-type=fire,
    %or-dmg=\DndDice{1d10+1},
    %or-dmg-when=if used with two hands,
    extra={. If the target is a Large or smaller creature, it must succeed on a DC 14 Dexterity saving throw or be swallowed by the whale. A swallowed creature has total cover against attacks and other effects outside the whale, and it takes 3 (1d6) acid damage at the start of each of the whale's turns. If the whale takes 30 damage or more on a single turn from a creature inside it, the whale must succeed on a DC 16 Constitution saving throw at the end of that turn or regurgitate all swallowed creatures, which fall prone in a space within 10 feet of the whale. If the whale dies, a swallowed creature can escape from the corpse by using 20 feet of movement, exiting prone},
  ]
  \DndMonsterMelee[
    name=Tail,
    mod=+11,
    reach=15,
    %targets=one target,
    dmg=\DndDice{3d6+8},
    dmg-type=bludgeoning,
    %plus-dmg=\DndDice{2d6},
    %plus-dmg-type=fire,
    or-dmg=\DndDice{6d6+16},
    or-dmg-when=if the target is an object,
    %extra={},
  ]
\end{DndMonster}

\begin{DndMonster}{Beluga Whale}
  \DndMonsterType{Huge beast, unaligned}

  \DndMonsterBasics[
      armor-class = {12 natural armor},
      hit-points  = {\DndDice{10d12 + 10}},
      speed       = {0 ft., swim 50 ft.},
    ]

  \DndMonsterAbilityScores[
      str = 17,
      dex = 10,
      con = 12,
      int = 3,
      wis = 12,
      cha = 5,
    ]

  \DndMonsterDetails[
      %saving-throws = {Str +0, Dex +0, Con +0, Int +0, Wis +0, Cha +0},
      skills = {Perception +2},
      %damage-vulnerabilities = {cold},
      %damage-resistances = {bludgeoning, piercing, and slashing from nonmagical attacks},
      %damage-immunities = {poison},
      %condition-immunities = {poisoned},
      senses = {Blindsight 120 ft., passive Perception 13},
      %languages = {},
      challenge = 2,
    ]

  % Traits
  \DndMonsterAction{Echolocation}
  The whale can't use its blindsight while deafened.
  \DndMonsterAction{Hold Breath}
  The whale can hold its breath for 30 minutes.
  \DndMonsterAction{Keen Hearing}
  The whale has advantage on Wisdom (Perception) checks that rely on hearing.

  \DndMonsterSection{Actions}
  \DndMonsterMelee[
    name=Bite,
    mod=+5,
    %reach=5,
    %targets=one target,
    dmg=\DndDice{4d6+2},
    dmg-type=piercing,
    %plus-dmg=\DndDice{2d6},
    %plus-dmg-type=fire,
    %or-dmg=\DndDice{1d10+1},
    %or-dmg-when=if used with two hands,
    %extra={}
  ]
\end{DndMonster}

\end{document}
